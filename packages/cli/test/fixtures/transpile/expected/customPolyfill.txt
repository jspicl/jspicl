-- polyfill: _map

function _map(collection, callback)
  local result = {}
  for value in all(collection) do
    add(result, callback(value))
  end

  return result
end
_map({
  1, 2, 3
}, function (x)
  return x * 2
end)